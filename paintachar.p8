pico-8 cartridge // http://www.pico-8.com
version 34
__lua__
--paint a char
--by brettski
--v1.0

function _init()
 poke(0x5f2d, 1) --mouse
 setglobals()
end

function _update()
 mousehdlr()
 btnhdlr()
 hchar,bchar,pchar=getcharvals()
end

function _draw()
 cls(5)
 map()
 --rect(0,0,127,127,8)--debug
 drw_editor()
 drw_output()
 spr(3,msx,msy) --pointer
end
-->8
--setup

function setglobals()
 msx=0
 msy=0
 mbt=0
 tlx=0
 tly=0
 outtype="hex"
 ic=6 --instr color
 icx="6" --instr color hex
 ihc=3 --instr hlight color
 oc=12
 ocx="c"
 hchar="" --hex char
 bchar="" --byte char
 pchar=""
end
-->8
--updates

function mousehdlr()
 msx=stat(32)
 msy=stat(33)
 mbt=stat(34)
 tlx=flr(msx/8)
 tly=flr(msy/8)
 if mbt==1 and msx<64 and msy<64 then
  mset(tlx,tly,1)
 elseif mbt==2 and msx<64 and msy<64 then
  mset(tlx,tly,0)
 end 
end


function btnhdlr()
	if btnp(⬅️) then
	 outtype="hex"
	elseif btnp(➡️) then
	 outtype="binary"
	elseif btnp(⬆️) then
	
	elseif btnp(⬇️) then
	
	elseif btnp(🅾️) then
	 toclipboard()
	elseif btnp(❎) then
	 clearchar()	
	end
end

-->8
--draws

function drw_editor()
	rect(0,0,63,63,15)
	print("paint a char",70,2,12)
	drw_instr()
 
end

function drw_output()
 local bmout=""
 bmout="\^."..bchar
 local tstr="quick brown"..bmout
 rect(77,27,86,36,15)
 print(bmout,78,28,7)
 print(bmout,90,28,7) 
	print(tstr,65,41,oc)
	--print(#pchar,8,122,10)
	print("ox",65+#tstr*4,41,10)
	print(sub(hchar,1,8),65,52,12)
	print(sub(hchar,9,16))
end

function drw_instr()
 local inst="l-mouse add pixel\n"
 inst=inst.."r-mouse remove pixel\n"
 inst=inst.."❎ to clear editor\n"
 
 inst=inst.."🅾️/c send "
 inst=inst.."\f"..ihc..""..outtype.."\f"..icx.." to clipboard\n"
 inst=inst.."⬅️➡️ change output hex/binary"
 
 print(inst,1,68,ic)
end
-->8
--utils

function clearchar()
 for x=0,7 do
  for y=0,7 do
   mset(x,y,0)
  end
 end
end

function getcharvals()
 local bm=""
 local hm=""
 local row=0
 for y=0,7 do
  for x=0,7 do
   row+=mget(x,y)*(2^x)
  end
  bm..=chr(row)
  hm..=tohex(row)
  row=0
 end
 return hm,bm,escp_bin_str(bm)
end

function tohex(num)
 local h=tostr(num,1)
	return sub(h,5,6)
end

function escp_bin_str(s)
 local out=""
 for i=1,#s do
  local c  = sub(s,i,i)
  local nc = ord(s,i+1)
  local pr = (nc and nc>=48 and nc<=57) and "00" or ""
  local v=c
  if(c=="\"") v="\\\""
  if(c=="\\") v="\\\\"
  if(ord(c)==0) v="\\"..pr.."0"
  if(ord(c)==10) v="\\n"
  if(ord(c)==13) v="\\r"
  out..= v
 end
 return out
end

function toclipboard()
 if (outtype=="hex") then
  printh(hchar,"@clip")
 else
  printh(escp_bin_str(bchar),"@clip")
 end
end

__gfx__
00000000676767677777000060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000767676767760000079d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070067676767767600000d9d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000767676767067600000d9d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770006767676700067000000d9d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070076767676000006000000d900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000676767670000000000000d90000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000767676760000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff5555555555555555555555555555555555555555555555555555555555555555
f55555555555555576767676555555555555555576767676555555555555555f5555555555555555555555555555555555555555555555555555555555555555
f55555555555555567676767555555555555555567676767555555555555555f555555ccc5ccc5ccc5cc55ccc55555ccc555555cc5c5c5ccc5ccc55555555555
f55555555555555576767676555555555555555576767676555555555555555f555555c5c5c5c55c55c5c55c555555c5c55555c555c5c5c5c5c5c55555555555
f55555555555555567676767555555555555555567676767555555555555555f555555ccc5ccc55c55c5c55c555555ccc55555c555ccc5ccc5cc555555555555
f55555555555555576767676555555555555555576767676555555555555555f555555c555c5c55c55c5c55c555555c5c55555c555c5c5c5c5c5c55555555555
f55555555555555567676767555555555555555567676767555555555555555f555555c555c5c5ccc5c5c55c555555c5c555555cc5c5c5c5c5c5c55555555555
f55555555555555576767676555555555555555576767676555555555555555f5555555555555555555555555555555555555555555555555555555555555555
f55555555555555567676767676767676767676767676767676767675555555f5555555555555555555555555555555555555555555555555555555555555555
f55555555555555576767676767676767676767676767676767676765555555f5555555555555555555555555555555555555555555555555555555555555555
f55555555555555567676767676767676767676767676767676767675555555f5555555555555555555555555555555555555555555555555555555555555555
f55555555555555576767676767676767676767676767676767676765555555f5555555555555555555555555555555555555555555555555555555555555555
f55555555555555567676767676767676767676767676767676767675555555f5555555555555555555555555555555555555555555555555555555555555555
f55555555555555576767676767676767676767676767676767676765555555f5555555555555555555555555555555555555555555555555555555555555555
f55555555555555567676767676767676767676767676767676767675555555f5555555555555555555555555555555555555555555555555555555555555555
f55555555555555576767676767676767676767676767676767676765555555f5555555555555555555555555555555555555555555555555555555555555555
f55555556767676767676767555555556767676767676767555555556767676f5555555555555555555555555555555555555555555555555555555555555555
f55555557676767676767676555555557676767676767676555555557676767f5555555555555555555555555555555555555555555555555555555555555555
f55555556767676767676767555555556767676767676767555555556767676f5555555555555555555555555555555555555555555555555555555555555555
f55555557676767676767676555555557676767676767676555555557676767f5555555555555555555555555555555555555555555555555555555555555555
f55555556767676767676767555555556767676767676767555555556767676f5555555555555555555555555555555555555555555555555555555555555555
f55555557676767676767676555555557676767676767676555555557676767f5555555555555555555555555555555555555555555555555555555555555555
f55555556767676767676767555555556767676767676767555555556767676f5555555555555555555555555555555555555555555555555555555555555555
f55555557676767676767676555555557676767676767676555555557676767f5555555555555555555555555555555555555555555555555555555555555555
f55555555555555567676767676767676767676767676767676767675555555f5555555555555555555555555555555555555555555555555555555555555555
f55555555555555576767676767676767676767676767676767676765555555f5555555555555555555555555555555555555555555555555555555555555555
f55555555555555567676767676767676767676767676767676767675555555f5555555555555555555555555555555555555555555555555555555555555555
f55555555555555576767676767676767676767676767676767676765555555f5555555555555ffffffffff55555555555555555555555555555555555555555
f55555555555555567676767676767676767676767676767676767675555555f5555555555555f55755755f55555755755555555555555555555555555555555
f55555555555555576767676767676767676767676767676767676765555555f5555555555555f55777775f55555777775555555555555555555555555555555
f55555555555555567676767676767676767676767676767676767675555555f5555555555555f57757757f55557757757555555555555555555555555555555
f55555555555555576767676767676767676767676767676767676765555555f5555555555555f55777775f55555777775555555555555555555555555555555
f55555556767676767676767676767676767676767676767555555555555555f5555555555555f57777755f55557777755555555555555555555555555555555
f55555557676767676767676767676767676767676767676555555555555555f5555555555555f77777775f55577777775555555555555555555555555555555
f55555556767676767676767676767676767676767676767555555555555555f5555555555555f75555555f55575555555555555555555555555555555555555
f55555557676767676767676767676767676767676767676555555555555555f5555555555555f57755555f55557755555555555555555555555555555555555
f55555556767676767676767676767676767676767676767555555555555555f5555555555555ffffffffff55555555555555555555555555555555555555555
f55555557676767676767676767676767676767676767676555555555555555f5555555555555555555555555555555555555555555555555555555555555555
f55555556767676767676767676767676767676767676767555555555555555f5555555555555555555555555555555555555555555555555555555555555555
f55555557676767676767676767676767676767676767676555555555555555f5555555555555555555555555555555555555555555555555555555555555555
f76767676767676767676767676767676767676767676767676767675555555f5555555555555555555555555555555555555555555555555555555555555555
f67676767676767676767676767676767676767676767676767676765555555f55c55c5c5ccc55cc5c5c55555ccc5ccc55cc5c5c5cc5555c55c5555555555555
f76767676767676767676767676767676767676767676767676767675555555f5c5c5c5c55c55c555c5c55555c5c5c5c5c5c5c5c5c5c555ccccc555555555555
f67676767676767676767676767676767676767676767676767676765555555f5c5c5c5c55c55c555cc555555cc55cc55c5c5c5c5c5c55cc5cc5c55555555555
f76767676767676767676767676767676767676767676767676767675555555f5cc55c5c55c55c555c5c55555c5c5c5c5c5c5ccc5c5c555ccccc555555555555
f67676767676767676767676767676767676767676767676767676765555555f55cc55cc5ccc55cc5c5c55555ccc5c5c5cc55ccc5c5c55ccccc5555555555555
f76767676767676767676767676767676767676767676767676767675555555f555555555555555555555555555555555555555555555ccccccc555555555555
f67676767676767676767676767676767676767676767676767676765555555f555555555555555555555555555555555555555555555c555555555555555555
f76767675555555555555555555555555555555555555555555555555555555f5555555555555555555555555555555555555555555555cc5555555555555555
f67676765555555555555555555555555555555555555555555555555555555f5555555555555555555555555555555555555555555555555555555555555555
f76767675555555555555555555555555555555555555555555555555555555f5555555555555555555555555555555555555555555555555555555555555555
f67676765555555555555555555555555555555555555555555555555555555f5555555555555555555555555555555555555555555555555555555555555555
f76767675555555555555555555555555555555555555555555555555555555f5ccc5c5c5ccc55cc5ccc5c555ccc55cc55555555555555555555555555555555
f67676765555555555555555555555555555555655555555555555555555555f555c5c5c555c5c555c5c5c55555c5c5555555555555555555555555555555555
f7676767555555555555555555555555555555579d555555555555555555555f5ccc5ccc555c5c555cc55ccc555c5c5555555555555555555555555555555555
f676767655555555555555555555555555555555d9d55555555555555555555f5c55555c555c5c555c5c5c5c555c5c5555555555555555555555555555555555
f5555555676767676767676755555555555555555d9d5555555555555555555f5ccc555c555c55cc5ccc5ccc555c55cc55555555555555555555555555555555
f55555557676767676767676555555555555555555d9d555555555555555555f5555555555555555555555555555555555555555555555555555555555555555
f555555567676767676767675555555555555555555d9555555555555555555f5ccc5ccc5ccc5ccc5ccc5cc55ccc5c5555555555555555555555555555555555
f5555555767676767676767655555555555555555555d955555555555555555f555c5c55555c5c555c5c55c55c5c5c5555555555555555555555555555555555
f55555556767676767676767555555555555555555555555555555555555555f55cc5cc5555c5cc55c5c55c55c5c5ccc55555555555555555555555555555555
f55555557676767676767676555555555555555555555555555555555555555f555c5c55555c5c555c5c55c55c5c5c5c55555555555555555555555555555555
f55555556767676767676767555555555555555555555555555555555555555f5ccc5ccc555c5c555ccc5ccc5ccc5ccc55555555555555555555555555555555
ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff5555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
56555555566655665656556656665555566656655665555556665666565656665655555555555555555555555555555555555555555555555555555555555555
56555555566656565656565556555555565656565656555556565565565656555655555555555555555555555555555555555555555555555555555555555555
56555666565656565656566656655555566656565656555556665565556556655655555555555555555555555555555555555555555555555555555555555555
56555555565656565656555656555555565656565656555556555565565656555655555555555555555555555555555555555555555555555555555555555555
56665555565656655566566556665555565656665666555556555666565656665666555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
56665555566655665656556656665555566656665666556656565666555556665666565656665655555555555555555555555555555555555555555555555555
56565555566656565656565556555555565656555666565656565655555556565565565656555655555555555555555555555555555555555555555555555555
56655666565656565656566656655555566556655656565656565665555556665565556556655655555555555555555555555555555555555555555555555555
56565555565656565656555656555555565656555656565656665655555556555565565656555655555555555555555555555555555555555555555555555555
56565555565656655566566556665555565656665656566555655666555556555666565656665666555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55666665555556665566555555665655566656665666555556665665566656665566566655555555555555555555555555555555555555555555555555555555
56656566555555655656555556555655565556565656555556555656556555655656565655555555555555555555555555555555555555555555555555555555
56665666555555655656555556555655566556665665555556655656556555655656566555555555555555555555555555555555555555555555555555555555
56656566555555655656555556555655565556565656555556555656556555655656565655555555555555555555555555555555555555555555555555555555
55666665555555655665555555665666566656565656555556665666566655655665565655555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55666665555655665555556656665665566555555353533353535555566655665555556656555666566656665566566656665665555555555555555555555555
56655566556556555555565556555656565655555353535553535555556556565555565556555565565656565656565656565656555555555555555555555555
56656566556556555555566656655656565655555333533555355555556556565555565556555565566656655656566656655656555555555555555555555555
56655566556556555555555656555656565655555353535553535555556556565555565556555565565556565656565656565656555555555555555555555555
55666665565555665555566556665656566655555353533353535555556556655555556656665666565556665665565656565666555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55666665556666655555556656565666566555665666555555665656566656665656566655555656566656565556566656665665566656665656555555555555
56665566566556665555565556565656565656555655555556565656556556565656556555555656565556565565565655655656565656565656555555555555
56655566566555665555565556665666565656555665555556565656556556665656556555555666566555655565566555655656566656655666555555555555
56665566566556665555565556565656565656565655555556565656556556555656556555555656565556565565565655655656565656565556555555555555
55666665556666655555556656565656565656665666555556655566556556555566556555555656566656565655566656665656565656565666555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555

